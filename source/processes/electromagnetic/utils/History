$Id: History,v 1.117 2003-10-27 17:26:57 vnivanch Exp $
-------------------------------------------------------------------

     =========================================================
     Geant4 - an Object-Oriented Toolkit for Simulation in HEP
     =========================================================

                      Category History file
                      ---------------------
This file should be used by G4 developers and category coordinators
to briefly summarize all major modifications introduced in the code
and keep track of all category-tags.
It DOES NOT substitute the  CVS log-message one should put at every
committal in the CVS repository !

     ----------------------------------------------------------
     * Reverse chronological order (last date on top), please *
     ----------------------------------------------------------

24 Oct 03: V.Ivant (utils-V05-02-09)
- Update logic of BuildPhysicsTable to take into account desactivate processes
- Update defalts for stepping algorithm

20 Oct 03: V.Ivant (utils-V05-02-08)
- Minor change of interface to G4EmFluctuationModel for PAI development
- Update logic of the messenger and G4LossTableManager to provide independence 
  on command sequence
- Increase verbosity for store/retrieve tables

14 Oct 03: V.Ivant (utils-V05-02-07)
- Update verbose/printout
- Add new method DefineForRegion to G4VEmModel
- Fix minor problems in messenger

4 Oct 03: G.Cosmo (utils-V05-02-06)
- Modified GNUmakefiles:
  o added dependency to new module "geometry/navigation".
  o replaced "digits+hits" with "digits_hits".
- Coworks with "geometry-V05-02-00" and "digits_hits-V05-02-00".

25 Sept 03: H.Kurashige (utils-V05-02-05)
- Add "#include G4MaterialCutsCouple.hh" in G4MultipleScattering52.hh

20 Sept 03: V.Ivant (utils-V05-02-04)
-Use warning for obsolete interfaces which uses G4Material instead of
 G4MaterialCutsCouple
-Update initialization of energy loss processes
-Update GNUmakefile

12 September 03: L.Urban
-fixed num. error for small stepsize in G4MscModel.cc (z sampling)

27 August 03: V.Ivant (utils-V05-02-03)
-Fix problems in compilation of some tests

08 August 03: V.Ivant (utils-V05-02-02)
-Substitute standerd by STD, freezing old standard as 52

07 August 03: V.Ivant (utils-V05-02-01)
- Update of the ion fluctuation model
- Update design - STD processes can be mixed in physics list with 
  old processes
- Tunning of msc model: fix poblems for width and for tails of distribution
  for the STD variant 

24 July 03: V.Ivant (utils-V05-02-00)
-Update model interface - substitute G4Material by G4MaterialCutsCouple
 in dE/dx and CrossSection methods
-Add Set methods to energy range of msc table
-Add method to change the nergy range of model 
-Add possibility to have STD and other processes in the same physics list

16 June 03: V.Ivant (utils-V05-01-07)
- ShortLived particles are not applicable for msc

04 June 03: V.Ivant (utils-V05-01-06)
- Fix compilation warnings
- Update STD initialisation 

28 May 03: V.Ivant (utils-V05-01-05)
- Remove absolete msc STD classes and add msc model (V.Ivanchenko)
- Fix misprint for msc at Tev energy (L.Urban)

26 May 03: V.Ivant (utils-V05-01-04)
- Fix compilation warnings for pedantic compiler option

26 May 03: V.Ivant (utils-V05-01-03)
- replaced msc STD with model variant
- remove debug printout from G4VEnergyLossSTD for ions
- fix minor problem in nuclear formfactor calculations for msc

23 May 03: V.Ivant (utils-V05-01-02)
- Fix initialisation of integral approach - correct definition
  of STD fluctuation model
- Remove tracking cut from STD
- Establish limits on eloss for Bohr and Ion fluctuations for STD

23 May 03: L.Urban (utils-V05-01-01)
- MultipleScattering and MultipleScatteringSTD :
- IMPORTANT change in the angle distribution for muons/hadrons
  the width of the central part now is corresponds to the value
  can be computed from the HighLand formula (no change of this
  kind for e+/e-) --> small change in the width for low to
  medium energy (protons - 1 MeV - few hundred MeV) but change up to
  20 -25 % for high energy.
- minor correction in the angle sampling algorithm, affects 
  e+/e- too --> small change for very small and very big
  stepsize/range values.

15 May 03: V.Ivant (utils-V05-01-00)
- add precise range calculation for STD
- defauld step parameters for STD set to be the same as standard

28 Apr 03: V.Ivant (utils-V05-00-13)
- add control on range for msc (effective for ions)

26 Apr 03: V.Ivant (utils-V05-00-12)
- fix of store/retrieve tables for msc and STD
- cleanup Bohr and Ion fluctuations

17 Apr 03: V.Ivant (utils-V05-00-11)
- additional clean up of msc variables
- improve output

13 Apr 03: V.Ivant (utils-V05-00-10)
- Add additional initialisation msc variables
- Add interface between standard and STD tables

09 Apr 03: V.Ivant (utils-V05-00-09)
- Fix problem of negative step limit for STD

07 Apr 03: V.Ivant (utils-V05-00-08)
- Add DeRegister to STD loss classes
- Add G4VMultipleScattering
- Remove STD messenger
     
26 Mar 03: V.Ivant (utils-V05-00-07)
- Add GetDEDXDispersion to STD loss tables

25 Mar 03: mma
- G4VEnergyLoss : add finalRangeRequested

12 Mar 03: V.Ivant (utils-V05-00-06)
- Add warning and G4Exception to G4EnergyLossTable
- Fix in MSC cut per region
- Fix in initialisation for STD
- Make messanger active at PreInit

10 Mar 03: V.Ivant (utils-V05-00-05)
- Updated MSC
- SubType for GenericIons
- Fix in energy range of models for STD

26 feb 03: V.Ivant (utils-V05-00-04a)
- For the February reference tag return back msc of 5.0
- Simplify control on GenericIons for STD

18 feb 03: V.Ivant (utils-V05-00-04)
- add control on CutsCouple usage
- utilise SubType for GenericIons
- fix problems with lambda and range tables for STD hadrons/ions
- fix problem of several runs with changed cuts/couples for STD

13 feb 03: V.Ivant
- add names for all models
- make the set of model per region available
- make SubCutoff regime available per region

10 feb 03: mma (utils-V05-00-03)
- tag to take account the Laszlo + Vladimir modifs

07 feb 03: V.Ivant
- fix problem in fluctuations for STD

06 feb 03: L.Urban 
- important modifications in MSC (both in old design and model
  version)
  - changes in data members
  - algorithm to reduce the step dependence is new
  - new sampling for the geom.pathlengths

05 feb 03: V.Ivant (utils-V05-00-02)
- Fix on warnings at SUN for STD classes
- Add Initialise method to STD classes to calculate PartialSumSigma
- Subsitute Material by MaterialCutsCouple for PostStep STD

24 jan 03: V.Ivant (utils-V05-00-01)
- Migration to "cut per region" 

06 jan 03: V.Ivant (utils-V05-00-00)
- Update interfaces to STD classes in order to be ready to migrade 
  to "cut per region"

12 dec 02: V.Ivant (utils-V04-01-12)
- Fix in multiple scattering for 1 MeV protons in both implementations.

09 dec 02: V.Ivant (utils-V04-01-11)
- Removed warnings in G4SCProcessorStand and G4UniversalFluctuation.

06 dec 02: G.Cosmo (utils-V04-01-10)
- Merged changes for new G4ApplicationState in messengers.

04 dec 02: V.Ivant (utils-V04-01-09)
- STD processes: fix model selection + delta-electron spectra   

11 nov 02: V.Ivant (utils-V04-01-08)
- G4VEnergyLoss: return back previous fluctuation model   
     
30 oct 02: mma (utils-V04-01-07)
- G4MultipleScattering: modified angle distribution, mods in boundary 
  algorithm, changes in data members, rename variable cm -> Ecm
  This new parametrisation improves the ~100 MeV proton scattering.
- propagated to G4MultipleScatteringSTD
- G4VEnergyLoss: minor changes in fluctuations   

28 oct 02: V.Ivanchenko (utils-V04-01-06)
- fix in G4MultipleScattringSTD + cleanup warnings in STD classes

17 oct 02: V.Ivant (utils-V04-01-05)
- temporary fix for proton scattering propagated in MultipleScatteringSTD
- Few changes in LossTableBuilder
  
16 oct 02: Laszlo (utils-V04-01-04)
- temporary fix for proton scattering
    
15 oct 02: V.Ivant (utils-V04-01-03)
- redesign for a Model approach: files processNameSTD and processNameModel
     
26 sep 02: Laszlo (utils-V04-01-02)
- angle distribution modified
- minor changes in boundary algorithm
     
12 aug 02: Laszlo (utils-V04-01-01)
- bug fixed in PostStepDoIt (lateral displacement)
     
06 aug 02: V.Ivanchenko (utils-V04-01-00)
G4VEnergyLoss: Fix at low energies - if tmax below ionisation potential
               then only Gaussian fluctuations are sampled.

11 jun 02: Laszlo (utils-V04-00-08)
- important bug fixed in G4MultipleScattering.cc
  ComputeTransportCrossSection. The bug affected the scattering
  for all the low energy ( <~ few hundred MeV) heavy particles.
     
24 may 02: Laszlo (utils-V04-00-07)
- G4MultipleScattering.hh,.cc: mods in angle distribution and
  in boundary algorithm 

06 may 02: Laszlo (utils-V04-00-06)
- G4MultipleScattering.cc :bug fixed in GetContinuousStepLimit
     
24 apr 02: Laszlo (utils-V04-00-05)
- G4MultipleScattering.hh,.cc have been committed:
  some minor changes in boundary algorithm to improve the backscattering.
       
22 apr 02: Laszlo (utils-V04-00-04)
- G4MultipleScattering.hh,.cc have been committed:
  boundary algorithm has been modified resulting improvement ~10%
  in the performance (with the same physics).
  
17 apr 02: Laszlo (utils-V04-00-03)
- G4MultipleScattering.hh,.cc have been committed:
  new parametrisation for angle distribution. 
  boundary algorithm has been modified + some other (minor) changes.

26 feb 02: mma (utils-V04-00-02)
- initial value of data member of G4VEnergyLoss finalRange = 1 mm
  (actual value of this data member is computed in
   G4VeEnergyLoss,G4VhEnergyLoss and G4VMuEnergyLoss.)
   
14 feb 02: L.Urban (utils-V04-00-01)
- initial value of data member of G4VEnergyLoss finalRange
  has been changed
  (actual value of this data member is computed in
   G4VeEnergyLoss,G4VhEnergyLoss and G4VMuEnergyLoss..)

11 feb 02: mma (utils-V04-00-00)
- subSecFlag = false --> No sucutoff generation
    
08 nov 01: mma (utils-V03-02-11)
- G4VEnergyLoss: some data members and functions are no more static
     
07 nov 01: mma (utils-V03-02-10)
- bug fixe in G4MultipleScattering::PostStepDoIt()
     
29 oct 01: mma (utils-V03-02-09)
- static functions no more inlined
     
24 oct 01: mma (utils-V03-02-08)
- cut per material: G4VEnergyLoss
     
28 sep 01: mma (utils-V03-02-07)
- StorePhysicsTable: ParticleName included in FileName

27 sep 01: L.Urban (utils-V03-02-06)
-  bug fixed in G4EnergyLossTables.icc,.cc:
   this bug caused sometime negative energy deposit
   (it was a very-very old bug)
-  value of data member factlim in msc has been changed

19 sep 01: mma (utils-V03-02-05)
- come back to previous process name: "msc"
     
17 sep 01: mma (utils-V03-02-04)
- modifs in muls and VEnergyLoss for the migration of Materials to pure STL,
  but backward compatible with g4rw 
         
 13 sep 01: L.Urban (utils-V03-02-03)
- Unused TrueToGeomTransformation method deleted. Class description
- corr. in ComputeTransportCrossSection
    
 11 sep 01: L.Urban (utils-V03-02-02)
- G4MultipleScatteringx put as the default: G4MultipleScattering
     
 11 sep 01: L.Urban (utils-V03-02-01)
- last tag with G4MultipleScatteringx file. 
    
 03 sep 01: L.Urban (utils-V03-02-00)
- value of data member factlim has been changed.
     
 28 aug 01: mma
- G4MultipleScatteringx: small modifs in BuildPhysicsTable,
  ComputeTransportCrossSection, PostStepDoIt. 
  GetContinuousStepLimit and AlongStepDoIt moved to .cc file

 23 aug 01: L. Urban
- new angle and z(geom. pathlength) distributions,
  energy (step) dependence has been reduced,
  Store/Retrieve methods have been commented out temporarily
     
 8 aug 01: mma
- G4MultipleScatteringx: methods to store/retrieve PhysicsTable

18 may 01: V.Ivanchenko (utils-V03-01-01)
- clean up againist Linux ANSI strict compilation mode.
    
16 may 01: L.Urban (utils-V03-01-00)
- value of the member cpar has been changed back to the original
  value 1.5 in G4MultipleScattering.cc. The same is done in
  G4MultipleScatteringx.cc (the data member name is cparm there).
  This change affects all the results for low energy (< 1 MeV
  for electrons).
  
15 may 01: L.Urban
- new multiple scattering version committed under the class name
  G4MultipleScatteringx. It gives better msc angle distribution
  than the standard G4MultipleScattering. It uses a distribution
  to simulate the geom./true pathlengths (standard : mean values
  only) and has a framework implemented in it to perform special
  stepping near to a boundary (this algorithm works, but some
  further development/tuning needed - this algorithm is disabled
  by default). This new version can be used after the change:
       G4MultipleScattering  --> G4MultipleScatteringx 
  in the PhysicsList. 
     
27 mar 01: L.Urban (utils-V03-00-06)
- another bug fixed in G4VEnergyLoss.cc, in the fluct code.
  The code gave in some cases (very rarely) small negative energy loss
  for small (~ micrometer) step size, now it is cured.

23 mar 01: L.Urban (utils-V03-00-05)
- bug fixed in fluct in G4VEnergyLoss.cc
  Some int internal variables have been changed to doubles,
  anomaly at extreme high energy/high cut (zero energy deposit)
  is cured.
     
05 mar 01 mma (utils-V03-00-04)
- new subdirectory: integral
  migration of all G4I.. processes from muons, standard, utils into integral
     
01 feb 01: L.Urban (utils-V03-00-01)
- bug fixed in the fluctuation code , in G4VEnergyLoss.cc
  This bug affected the width of the energy loss/energy deposit
  distribution in the case of small cut value, the distribution
  was too narrow....
     
16 jan 01: mma (utils-V03-00-00)
- bug fixed in MultipleScattering.cc L.Urban 11-01-01 
  there was an error in computation of the transport
  cross section, the cross section was too small for
  low energy (below few MeV for electrons)
    
09 nov 00: mma (utils-V02-00-04)
- G4EnergyLossMessenger : subdirectory /process/eLoss created 
  + class description
       
04 nov 00: mma (utils-V02-00-03)
- EnergyLossTable: const G4Material* in all functions
- G4VEnergyLoss and Messenger slighy modified for more flexibility
  only (Laszlo)
     
11 aug 00: mma (utils-V02-00-01)

03 aug 00: gc
- fixed problem for event reproducibility: changed RandGauss to G4RandGauss
  in G4VEnergyLoss.cc. Needs tag "global-V02-00-02" to cowork with.

22 jun 00: mma  (utils-V01-01-03)
- muls: do not nuclear size correction for electron
- move Eloss messenger --> G4VEnergyLoss
          
24 may 00: mma  (utils-V01-01-02)
- merge "plus" processes into standard      
     
27 apr 00 mma  (em-V01-01-01)
- G4endl (dec/iso)      
     
26 apr 00 mma  (em-V01-01-00)
- all EnergyLoss classes renamed G4V... 
  Most classes in standard and muons affected.
- G4Muls moved in utils
- bugs fixe in MuPairProduction  
- cowork with geant4-01-01-ref-02
     
02 mar 00 mma  (em-V01-00-00)
- new G4VEnergyLoss class and related structure
- cowork with geant4-01-00-ref-06
     
10 nov 99 mma  (em-V00-01-03)
- migration to STL: remove RWT hash dictionnary

14th June 1999  John Allison (em-01-00-05b)
- Muon corrections in G4MultipleScattering.cc, G4MuBremsstrahlung.cc
  and G4MuPairProduction.cc by Laszlo Urban, Pedro Arce.
  (Also in rocesses/photoleplon_hadron/src/G4MuNuclearInteraction.cc.)

5th June 1999  John Allison
- standard/GNUmakefile: Force non-optimised compliation of some
  files on HP with aCC: HP ANSI C++ B3910B A.01.15.

May 29, 1999: John Allison
- Added electromagnetic/lowenergy to GNUmakefile and
  electromagnetic/GNUmakefile..
