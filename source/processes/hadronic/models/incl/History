-------------------------------------------------------------------

     ==========================================================
     Geant4 - an Object-Oriented Toolkit for Physics Simulation
     ==========================================================
$Id: History,v 1.11 2008-04-22 21:39:50 kaitanie Exp $
---------------------------------------------------------------------

           History file for the Liege cascade INCL Model
           ---------------------------------------------

This file should be used to summarize modifications introduced in the 
code and to keep track of all tags.

   ---------------------------------------------------------------
   * Please list in reverse chronological order (last date on top)
   ---------------------------------------------------------------

22 April 2008 - Pekka Kaitaniemi
-----------------------------------
- INCL/ABLA changes:
  o Fix compilation warnings caused by G4InclDataDefs.hh.
  o Fix: Partial fix to the Alpha evaporation energies.
  o Fix: Neutron energies.
  o Fix: Moved remnant direction calculation block and added safeguards.
  o ABLA bugfix: switched the transformation matrix indices.
  o Added function that will calculate the total three momentum of the output.
  o Added remnant kinematic variables to the output data structure.
  o Add #ifdef to G4Abla.hh to make sure it is defined only once.
  o Add safeguards to ABLA output handling.
  o Started encapsulating the INCL/ABLA output data structures (class
  G4VarNtp). Data will be in private variables, public methods
  provided for controlled data access. First step:
  G4VarNtp::addParticle() method.
  o Initialize INCL output data structures.
  o Improved INCL/ABLA debug messages.
  o Added safeguards, error checks and data dumping features to
  essential INCL/ABLA data structures (classes G4VarNtp, G4Volant).
  o ABLA debug output improvements.
  o Added RANECU random number generator.
  o Removed unused data structures from ABLA code.
  o Added an abstract interface for random number services and use it everywhere 
  in the INCL and ABLA codes.
- Changes to the test suite:
  o Added new test run configs.
  o Add unit test program. Tests methods G4Abla::direct() and
  G4Abla::densniv().
  o Added debug output generator to the data structures.
  o ABLA debug output improvements.
  o Added standalone FORTRAN ABLA test.
  o Make test suite able to run INCL only for all tests.
- Documentation updates:
  o Updated example double-differential plot.
  o Documentation will be updated for June'08 release.

27 February 2008 - Pekka Kaitaniemi
-----------------------------------
- INCL/ABLA changes since Geant4 9.1:
  o Initialized variables to zero and improved coding style.
  o Variable "bet" needs to be part of G4Fiss.
  o Fixed a variable definition. Variable "homega" is part of "G4Fiss".
  o Fixed an index off-by-one bug in G4Abla.
  o Fix an infinite loop.
  o Move the stored event number to the class definition.
  o Added a possible (commented) fix for ABLA output off-by-one problem.
  o Cleaned up G4Abla::qrot comments.
- Changes to the test suite since Geant4 9.1:
  o Added more tests.
  o New test system.
  o Compare FORTRAN and C++ results.
  o Preliminary GUI for running plotting scripts.

04 December 2007 - Gabriele Cosmo (hadr-incl-V09-00-09)
---------------------------------
- Again commented out call to isnan() in G4Incl.cc for allow
  porting to platforms other than Linux....

03 December 2007 - Pekka Kaitaniemi
-----------------------------------
- Added bugfixes to INCL nucleon array handling. Several off-by-one
  bugs were fixed. These fixes help with INCL neutron energy spectra. 
- 4-momentum conservation problem was noticed to be mainly ABLA
  related. 
  o INCL alone violates energy conservation only by less than 20 MeV.
  o ABLA has problems with baryon number conservation. Some produced
  nucleons are not given back to INCL and Geant4. This is probably the
  main reason for 4-momentum conservation violations.
- Added 4-momentum and baryon number conservation checking code to the
  interfaces (behind flag DEBUGINCL).

15 November 2007 - Pekka Kaitaniemi
-----------------------------------
- First fix to secondary particle Pt, Px and Phi distributions.
  o Momentum x-component was transformed incorrectly from spherical to
  cartesian coordinates.

08 November 2007 - Pekka Kaitaniemi
-----------------------------------
- Started using G4UniformRand as a random number generator. 
  o It is much more sophisticated generator than the original INCL one
  was.  
  o This should eliminate infinite loop in test runs on 64-bit
  plattforms. The old generator probably was not 64-bit clean.

31 October 2007 - Gabriele Cosmo (hadr-incl-V09-00-05)
--------------------------------
- Again commented out calls to isnan() and isinf() in G4Abla.cc for allow
  porting to platforms other than Linux.

30 October 2007 - Pekka Kaitaniemi
----------------------------------
- Abla now runs. Integrated energy spectrums for protons and neutrons
  seem to be OK. Isotope production is still problematic. There seems
  to be too much fission.

24 October 2007 - Pekka Kaitaniemi (hadr-incl-V09-00-04)
----------------------------------
- Modified INCL to filter out unphysical events containing particles
  that have more energy than the energy of the projectile. This should
  fix problem we had with outcoming neutrons (and protons) that have
  more energy than the projectile particle.
- Added G4InclAblaDataFile class that reads data used by INCL/ABLA
  from datafiles located in $G4ABLADATA. If this environment variable
  is not correctly set INCL/ABLA returns G4Exception.
- Problematic hardcoded data has been removed.

16 October 2007 - Pekka Kaitaniemi
------------------------------------------------------
- Silenced the rather verbose output. Now nothing should be printed on
  terminal by default.
- Fixed INCL internal random number generator bug that sometimes
  (rarely) produced random numbers that were greater than 1.0.
- Random number seeds are now taken from CLHEP::HepRandom.
- Cleaned up some commented code.
- Found new NaN bugs in ABLA.

13 October 2007 - Pekka Kaitaniemi
------------------------------------------------------
- Interface cleanup. G4InclCascadeInterface and
  G4InclLightIonInterface  should be fully operational.
- INCL was reverted back to using simple random number generator for
  test result compatibility (to produce exactly same results as the
  FORTRAN version does).
- Fixes for ABLA evaporation/fission:
  o Fission barrier problem fixed. Now fission code is called during
    the run.
  o Several NaN bugs fixed.
  o Random seed initialization bug fixed.
  o Stand-alone INCL/ABLA program (test/standaloneinclabla) mostly
    works (produces results that are sometimes in good agreement with
    FORTRAN version and sometimes in not so good agreement). With
    heavy targets and lots of energy fission is overestimated.
  o INCL+ABLA interface not yet fully operational. G4 simulation run
    crashes. 

11 October 2007 - Gabriele Cosmo (hadr-incl-V09-00-01)
------------------------------------------------------
- Fixes for porting:
  o Commented out usage of isnan() and isinf() in assertions.
  o Replaced usage of M_PI with CLHEP::pi.
  o Use std namespace for standard mathematical functions.
  o Casted to double arguments used in std::pow() function.
  o Commented out initialisation of data in G4InclAblaHardcodedData.cc
    for Windows; temporary solution to allow for compilation, pending
    solution of loading of data from file !

23 May 2007 - Aatos Heikkinen (hadr-incl-V09-00-00)
---------------------------------------------------
- First version of the Liege cascade INCL Model.


