
 Last update: 06-Aug-2008
 ========================

 This directory contains all the stuff needed in order
 to study the same set of simplified calorimeters, as used
 for Geant4, in the case of Fluka simulation program.

 The shell script  setup.sh  shows an example of how to
 setup the only environmental variable needed for running
 Fluka (FLUPRO).

 The shell script  build.sh  shows how to build the Fluka
 executable, using the user Fortran routines located in
 the  dirUserRoutines/  subdirectory.

 The subdirectory  dirWriteFlukaCaloGeometry/  contains
 a Python script, writeFlukaCaloGeometry.py , which allows
 to produce the  mysmallinclude.inc  files and the Fluka
 input files  *.inp  starting from the corresponding Geant4
 macro files  *.g4 .
 6 simplified calorimeters, all 10-lambda in thickness,
 are considered:
   -  CMS HCAL         (  25 layers of Cu(60mm)-Sci(4mm) )
   -  ATLAS HEC        (  60 layers of Cu(25mm)-LAr(8.5mm) ) 
   -  PbWO4            
   -  TileCal	       ( 100 layers of Fe(16.76mm)-Sci(4mm) )
   -  ATLAS TileCal    ( 120 layers of Fe(14mm)-Sci(3mm) )
   -  precise CMS HCAL (  30 layers of Cu(50mm)-Sci(3.7mm) )
 In the same directory, for convenience, we have include
 these *.g4 files and the corresponding output produced 
 by running the Python script.
 Please note that you need to make some choices before
 executing  writeFlukaCaloGeometry.py : see "***LOOKHERE***" .
 Furthermore, you need to manually edit the  *.inp  that
 are produced, to properly aligned the various fields.
 In this subdirectory there are two sets of  *.inp  files:  
   *_newstyle.inp : it defines its own materials,
                    and then properly use LOW-MAT cards;
   *_oldstyle.inp : it uses the old possibility to define
	            the same material names as predefined
	            in Fluka.
 Both types of input files can be used and should produce
 equivalent results.

 The subdirectory  dirUserRoutines/  contains the Fortran
 user routines  *.f . 
 You need to edit the file  mgdraw.f  (see "***LOOKHERE***")
 to switch on/off Birks. In the case you switch it on,
 the Birks coefficients are specified in the Fluka input
 file  *.inp , with the card USERDUMP (with SDUM="UDQUENCH").
 According to which simplified detector you are interested,
 you have to symbolically link the proper mysmallinclude.inc-xxx
 file as  mysmallinclude.in . For example, in the case of
 CMS HCAL:
           $  ln -sfn mysmallinclude.inc-cms  mysmallinclude.inc

 The shell script  scanEnergy.sh , and the tar-balls *.tgz
 are useful for a energy scan, from 1 to 30 GeV, of 4
 simplified calorimeters: ATLAS HEC, CMS HCAL, PbWO4, and
 TileCal.

