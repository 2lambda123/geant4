echo ">>>>>>>"
echo ">>>>>>> STARTING TEST $1 <<<<<<<"
echo ">>>>>>>"
echo ""
cd ../src
export G4TARGET=$1
export G4DEBUG=$1
echo ">>>>>>>"
echo ">>>>>>> Now building $1 <<<<<<<"
echo ">>>>>>>"
# rm $1
# gmake clean
# gmake
echo ">>>>>>>"
echo ">>>>>>> Now running $1 <<<<<<<"
echo ">>>>>>>"
pwd
rm ../logs/$1.log
ln -s ../../../../../../../../../bin/Linux-g++/$1 $1
./$1 < ../inputs/$1.$2.in > ../logs/$1.$2.log
echo ">>>>>>>"
echo ">>>>>>> stripping out multiplicity information <<<<<<<"
echo ">>>>>>>"
rm ../logs/$2.mult.log
awk '{if(/STRINGDUMP/) print "@"$3"@"}' ../logs/$1.$2.log > ../logs/$2.mult.log

echo "Number of pi-:"
grep @-211@ ../logs/$2.mult.log | wc -l
echo "Number of pi+:"
grep @211@ ../logs/$2.mult.log | wc -l
echo "Number of pi0:"
grep @111@ ../logs/$2.mult.log | wc -l
echo "Number of K+:"
grep @321@ ../logs/$2.mult.log | wc -l
echo "Number of K-:"
grep @-321@ ../logs/$2.mult.log | wc -l
echo "Number of K0:"
grep @311@ ../logs/$2.mult.log | wc -l
grep @310@ ../logs/$2.mult.log | wc -l
grep @130@ ../logs/$2.mult.log | wc -l
echo "Number of protons:"
grep @2212@ ../logs/$2.mult.log | wc -l
echo "Number of p-bar:"
grep @-2212@ ../logs/$2.mult.log | wc -l
echo "Number of sigma and lambda:"
grep @3122@ ../logs/$2.mult.log | wc -l
grep @3222@ ../logs/$2.mult.log | wc -l
grep @3212@ ../logs/$2.mult.log | wc -l
grep @3112@ ../logs/$2.mult.log | wc -l
echo "Number of anti sigma and anti lambda:"
grep @-3122@ ../logs/$2.mult.log | wc -l
grep @-3222@ ../logs/$2.mult.log | wc -l
grep @-3212@ ../logs/$2.mult.log | wc -l
grep @-3112@ ../logs/$2.mult.log | wc -l
echo ">>>>>>>"
echo ">>>>>>> TEST $1 TERMINATED <<<<<<<"
echo ">>>>>>>"
echo ""
