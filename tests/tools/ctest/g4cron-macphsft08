#!/usr/bin/env bash
#------------------------------------------------------------------

#---Xerces-C-------------------------------------------------------
export XERCESC_ROOT_DIR=/build/externals/xerces-c-3.1.0
export DYLD_LIBRARY_PATH=${XERCESC_ROOT_DIR}/lib:${DYLD_LIBRARY_PATH}

#-----------------------------------------------------------------
THIS=$(dirname $0)
WORKDIR=/build/cdash/G4
CONFIG=mac107-gcc42

export VERSION=g4tags-dev

#---Update All Scripts------------------------------------------------
svn update ${THIS}

#---Run the CTest script(s)-------------------------------------------
export SOURCE=${WORKDIR}/nightly/${VERSION}
export BINARY=${WORKDIR}/nightly/${CONFIG}

if [ ! -d "${SOURCE}" ]; then 
  ${THIS}/g4tagsvn.py update -c ${VERSION} -d ${SOURCE} -q
fi
ctest -V -S ${THIS}/g4nightly.cmake 


export SOURCE=${WORKDIR}/continuous/${VERSION}
export BINARY=${WORKDIR}/continuous/${CONFIG}

if [ ! -d "${SOURCE}" ]; then 
  ${THIS}/g4tagsvn.py update -c ${VERSION} -d ${SOURCE} -q -p
fi
ctest -V -S ${THIS}/g4continuous.cmake 

