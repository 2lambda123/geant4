#!/usr/bin/env bash

#------------------------------------------------------------------
export LC_CTYPE=en_US.UTF-8
export LC_ALL=en_US.UTF-8

#---CLHEP----------------------------------------------------------
#export CLHEP_ROOT_DIR=/Users/mato/Development/clhep-2.1.2.3
#export LD_LIBRARY_PATH=${CLHEP_ROOT_DIR}/lib:${LD_LIBRARY_PATH}

#-----------------------------------------------------------------
THIS=$(dirname $0)

export WORKDIR=/Users/mato/Development/G4
export VERSION=g4tags-dev
export CONFIG=mac107-gcc42-gmake
export MODE=experimental

export SOURCE=${WORKDIR}/${MODE}/${VERSION}
export BINARY=${WORKDIR}/${MODE}/${CONFIG}

#---Environment from http://geant4.web.cern.ch/geant4/UserDocumentation/UsersGuides/InstallationGuide/html/ch06.html
export G4SYSTEM=Darwin-g++
export G4INSTALL=${BINARY}
export G4SOURCE=${SOURCE}
export G4BASE=${SOURCE}/source
export CLHEP_BASE_DIR=${CLHEP_ROOT_DIR}
export G4LIB_BUILD_SHARED=1
export G4_NO_VERBOSE=1
export G4LIB_USE_GRANULAR=1
export G4LIB_USE_CLHEP=1

#---Data libraries environment variables--------------------------
export G4_DATA_DIR=${WORKDIR}/data
export G4LEVELGAMMADATA=${G4_DATA_DIR}/PhotonEvaporation2.2
export G4LEDATA=${G4_DATA_DIR}/G4EMLOW6.27
export G4RADIOACTIVEDATA=${G4_DATA_DIR}/RadioactiveDecay3.4
export G4ELASTICDATA=${G4_DATA_DIR}/G4ELASTIC
export NeutronHPCrossSections=${G4_DATA_DIR}/G4NDL4.0
export G4NEUTRONHPDATA=${G4_DATA_DIR}/G4NDL4.0
export G4ABLADATA=${G4_DATA_DIR}/G4ABLA3.0
export G4PIIDATA=${G4_DATA_DIR}/G4PII1.3
export G4NEUTRONXSDATA=${G4_DATA_DIR}/G4NEUTRONXS1.1
export G4SAIDXSDATA=${G4_DATA_DIR}/G4SAIDDATA1.1


if [ ! -d "${SOURCE}" ]; then 
  #rm -rf ${SOURCE}
  ${THIS}/g4tagsvn.py checkout -c ${VERSION} -d ${SOURCE} -q
fi

ctest -V -S ${THIS}/g4gnumake.cmake 


