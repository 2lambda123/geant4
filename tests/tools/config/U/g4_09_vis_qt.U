?RCS:
?MAKE: g4vis_build_openglqt_driver g4vis_use_openglqt: g4system g4vis_build_dawn_driver Qt Myread Getfile Loc cat test
?MAKE:	-pick add $@ %<
?S:g4vis_build_openglqt_driver:
?S:	This variable determines whether the Qt OpenGL driver will be built 
?S:.
?S:g4vis_use_openglqt:
?S:	This variable determines whether the Qt OpenGL driver will be used.
?S:.
?INIT:#INITIALIZE QT VIS DRIVER OPTIONS
?INIT:g4vis_build_openglqt_driver='n'
?INIT:g4vis_use_openglqt='n'
?INIT:#END QT VIS DRIVER OPTIONS

#
# BEGIN QTVIS/QT PROBE
#
# Because the vis driver only works with UI, only probe if g4ui_none is
# NOT set AND also that g4vis_none is NOT set
#
if test "x$g4ui_none" = "xn" -a "x$g4vis_none" = "xn" ; then
    # Query the user to see if build of Qt UI module is needed
    g4message=`cat <<EOM

    G4UI_BUILD_OPENGLQT_DRIVER
    G4UI_USE_OPENGLQT

Setting these variables will enable the building of the G4 OpenGL Qt based 
visualisation driver and the use of this driver in your applications
respectively.
The Qt3 or Qt4 headers, libraries and moc application are required to enable
the building of this module.
Do you want to enable build and use of this module?
EOM`

    # Read in the user response
    dflt=$g4vis_build_openglqt_driver
    rp=$g4message
    . ./myread
    gans=$ans

    # Check response and take set variables as needed.
    case $gans in
        n*|N*)
	    g4vis_build_openglqt_driver=n
            g4vis_use_openglqt=n
	    ;;
	y*|Y*)
	    g4vis_build_openglqt_driver=y
            g4vis_use_openglqt=y
            ;;
    esac

    ##########

    ##########
    # Now, if user chose to build module, we need to check for a Qt
    # installation
    #
    if test "x$g4vis_build_openglqt_driver" = "xy" ; then
	echo " "
	# NB Have to supply arg to qt script, just blank in this case!
	qt_search_dir=""
	. ./qt

	# If we didn't find Qt automatically, then ask user if they know
	# where it's installed...
	if test "x$g4_havegoodqt" = "xno" ; then
	    promptend="no"
	    user_qthome="the standard locations"

            while test "x$promptend" = "xno" ; do
	        g4message=`cat << EOM

Autodetection failed to locate Qt3 or Qt4 in $qthomeloc on your system.
Please enter the path to your Qt3 OR Qt4 install (i.e. if Qt4 is installed
in PATH/include/QT, PATH/include or PATH/include/qt4, enter PATH),
or type '-' to CANCEL the build of the Qt UI module.
Qt path:
EOM`
		dflt=""
                fn='d~(-)'
		rp=$g4message
		. ./getfile
		user_qthome=$ans

		if test "x$user_qthome" = "x-" ; then
		    # Cancel build...
		    g4vis_build_openglqt_driver=n
		    g4vis_use_openglqt=n
		    echo "configure: build/use of Qt OpenGl driver cancelled"
		    promptend=yes
		else
		    # Check for installation in user directory
		    echo " "
		    qt_search_dir=$user_qthome
		    . ./qt

		    if test "x$g4_havegoodqt" = "xyes" ; then
			promptend=yes
		    fi
		fi #END TEST user_qthome = -
            done #END while promptend=no (for user input of Qt install)
        fi #END TEST g4_havegoodqt = no (for user prompt)
    fi #END TEST g4vis_build_openglqt_driver (whether to build at all)
fi #END TEST g4ui_none = n AND g4vis_none=n
