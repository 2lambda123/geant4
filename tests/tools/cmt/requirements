package Geant4

build_strategy no_prototypes
include_path none

include_dirs $(GEANT4ROOT)/include

#//////////////////////////////////////////////////
#//////////////////////////////////////////////////

use CLHEP v1r1 Interfaces

#//////////////////////////////////////////////////
#//////////////////////////////////////////////////
#//////////////////////////////////////////////////
# /GR to enable RTTI and dynamic cast.
#macro_append cppflags "" WIN32 " /GX /GR" 

macro Geant4_source "../source"
macro Geant4_binDir "${CMTCONFIG}"

pattern Geant4_pattern_linkopts \
  macro <lib>_linkopts "-L${GEANT4ROOT}/${Geant4_binDir} -l<lib>"\
                 WIN32 "${GEANT4ROOT}\${Geant4_binDir}\<lib>.lib"

#//////////////////////////////////////////////////
#//////////////////////////////////////////////////
#//////////////////////////////////////////////////
#macro Geant4_cppflags " -fno-for-scope -DGNU_GCC -fPIC"

macro Geant4_cppflags "-DG4USE_STL -DG4USE_STD_NAMESPACE -DG4VERBOSE -DG4_STORE_TRAJECTORY" \
                WIN32 "/DG4USE_STL /DG4USE_STD_NAMESPACE /DG4VERBOSE /DG4_STORE_TRAJECTORY"

#//////////////////////////////////////////////////
#//////////////////////////////////////////////////
#//////////////////////////////////////////////////
library G4global -s=${Geant4_source} \
 global/HEPNumerics/src/*.cc \
 global/management/src/*.cc
#macro G4global_shlibflags "${CLHEP_linkopts}"
apply_pattern Geant4_pattern_linkopts app=G4global

library G4particles -s=${Geant4_source}/particles \
 management/src/*.cc \ 
 bosons/src/*.cc \ 
 leptons/src/*.cc \ 
 shortlived/src/*.cc \ 
 hadrons/mesons/src/*.cc \
 hadrons/barions/src/*.cc \ 
 hadrons/ions/src/*.cc   
apply_pattern Geant4_pattern_linkopts app=G4particles

library G4processes \
 -s=${Geant4_source}/processes \
 management/src/*.cc \
 optical/src/*.cc \
 decay/src/*.cc \
 transportation/src/*.cc \
 parameterisation/src/*.cc \
 photolepton_hadron/src/*.cc \
 -s=${Geant4_source}/processes/electromagnetic \
 muons/src/*.cc \
 standard/src/*.cc \
 utils/src/*.cc \
 xrays/src/*.cc \
# lowenergy/src/*.cc \
 -s=${Geant4_source}/processes/hadronic \
 management/src/*.cc \
 util/src/*.cc \
 processes/src/*.cc \
 cross_sections/src/*.cc \
 stopping/src/*.cc \
 -s=${Geant4_source}/processes/hadronic/models \
 low_energy/src/*.cc \
 high_energy/src/*.cc \
 neutron_hp/src/*.cc \
 isotope_production/src/*.cc \
 radiative_decay/src/*.cc \
 -s=${Geant4_source}/processes/hadronic/models/generator \
 de_excitation/src/*.cc \
 diffractive_string/src/*.cc \
 high_energy/src/*.cc \
 kinetic_model/src/*.cc \
 management/src/*.cc \
 pre_equilibrium/src/*.cc \
 quark_gluon_string/src/*.cc \
 string_common/src/*.cc \
 string_fragmentation/src/*.cc \
 util/src/*.cc
apply_pattern Geant4_pattern_linkopts app=G4processes

library G4geometry -s=${Geant4_source}/geometry \
 solids/STEP/src/*.cc \
 solids/CSG/src/*.cc \
 solids/specific/src/*.cc \
 solids/Boolean/src/*.cc \
 solids/BREPS/src/*.cc \
 solids/STEPinterface/src/*.cc \
 management/src/*.cc \
 volumes/src/*.cc \
 magneticfield/src/*.cc \
 verification/src/*.cc
#macro SdaiCONFIG_CONTROL_DESIGN_cc_cppflags "-O0 " WIN32 "-Zm500 "
#macro SdaiCONFIG_CONTROL_DESIGN_init_cc_cppflags "-O0 " WIN32 "-Zm500 "
apply_pattern Geant4_pattern_linkopts app=G4geometry

library G4digitsPlusHits -s=${Geant4_source}/digits+hits \
 detector/src/*.cc \
 digits/src/*.cc \
 hits/src/*.cc
apply_pattern Geant4_pattern_linkopts app=G4digitsPlusHits
 
library G4event ${Geant4_source}/event/src/*.cc 
apply_pattern Geant4_pattern_linkopts app=G4event

library G4tracking ${Geant4_source}/tracking/src/*.cc 
apply_pattern Geant4_pattern_linkopts app=G4tracking

library G4track ${Geant4_source}/track/src/*.cc 
apply_pattern Geant4_pattern_linkopts app=G4track

library G4materials ${Geant4_source}/materials/src/*.cc  
apply_pattern Geant4_pattern_linkopts app=G4materials

library G4run ${Geant4_source}/run/src/*.cc 
apply_pattern Geant4_pattern_linkopts app=G4run

library G4graphics_reps -s=${Geant4_source}/graphics_reps/src/*.cc 
apply_pattern Geant4_pattern_linkopts app=G4graphics_reps

library G4intercoms -s=${Geant4_source}/intercoms/src/*.cc 
apply_pattern Geant4_pattern_linkopts app=G4intercoms

library G4parameterisations -s=${Geant4_source}/parameterisations/src/*.cc 
apply_pattern Geant4_pattern_linkopts app=G4parameterisations

#library G4readout -s=${Geant4_source}/readout/src/*.cc 
#apply_pattern Geant4_pattern_linkopts app=G4readout


