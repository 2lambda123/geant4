
     =========================================================
 		      Geant4 - Brachytherapy example
     =========================================================

                             README
                      ---------------------

------------------------------------------------------------------------
----> Introduction.                                                     |
                                                                       
Brachytherapy example simulates energy deposit in a Phantom filled with |
soft tissue for: 
1) Iridium source (endocavitary brachytherapy).                         |
2) Iodium  source (interstitial brachytherapy).                         
3) Leipzig Applicator (superficial brachytherapy).                      |
------------------------------------------------------------------------
----> 1.Experimental set-up.                                            |

The default source is an Ir-131 source put in the center of the Phantom.|  
The Phantom is a box (dimension:30cm), it is gridded in 
voxels (1.mm dimension)                                                 |
------------------------------------------------------------------------
----> 2.How to run the example.                                         |

- batch mode:
  $G4WORDIR/bin/Linux-g++/Brachy IridiumSourceMacro.mac                 |
  $G4WORDIR/bin/Linux-g++/Brachy IodiumSourceMacro.mac       
  $G4WORDIR/bin/Linux-g++/Brachy LeipzigSourceMacro.mac  
                                                                        |
- Interative mode:                                                      
  3) $G4WORDIR/bin/Linux-g++/Brachy                                     |

-->possible different configurations for interactive mode:              |

1)Ir source:                                                            |
idle>/run/beamOn NumberOfEvents      ...and then
idle>exit                                                               |

2)Leipzig Applicator:                                                   |
idle>/source/switch Leipzig                                           
idle>/run/beamOn NumberOfEvents     ...and then                         |
idle> exit
                                                                        |
3) Iodium  source:
idle>/source/switch Iodium                                              |
idle>/run/energy Iodium
idle>/run/beamOn NumberOfEvents     ...and then                         |
idle>exit
                                                                        |
*Before the run you can also change the absorber material of the 
Phantom:                                                                |
idle>/phantom/selectMaterial  materialName
                                                                        |
- batch mode: executable Brachy macroFile.mac 
  a macro is provided as example: IodiumSourceMacro.mac                 |
  (ex. $G4WORKDIR/bin/Linux-g++/Brachy IodiumSourceMacro.mac)   
------------------------------------------------------------------------
----> 3. Simulation output                                              |

if ANALYSIS_USE = 1 the output is brachytherapy.hbk                     |
 It contains:
 1)1Dhistogram with the primary particle energy                         |
 2)2Dhistogram with the distribution of energy in the plane 
   (x,z,energy) containing the source (YThickness = 1. mm)              |
 3)Ntuple with the 3D energy deposit in the Phantom                    
                                                                        |
Units:   the energy deposit is in MeV;
         x, y, z in mm for both 2D-histogram and ntuple                 |
------------------------------------------------------------------------
----> 4.Visualisation                                                   | 

a macro is provided ad example of visulisation:  VisualisationMacro.mac |
run $G4WORKDIR/bin/Linux-g++/Brachy VisualisationMacro.mac
-------------------------------------------------------------------------
----> 5.SET-UP 
  
 -example enviroment with the compiler 3.2
 -a standard Geant4 example GNUmakefile is provided
 -running CERN RH 7.3


setenv G4LEDATA /afs/cern.ch/sw/geant4/dev/data/G4EMLOW2.1
setenv CLHEP_BASE_DIR /afs/cern.ch/sw/geant4/dev/CLHEP/Linux-g++/RH73/1.8
setenv G4INSTALL ...
setenv G4SYSTEM Linux-g++
setenv G4LIB ....
setenv G4WORKDIR ...

---visualisation-----

# ---- set up VRMLview
setenv G4VIS_BUILD_VRMLFILE_DRIVER  1
setenv G4VIS_USE_VRML               1
setenv G4VIS_USE_VRMLFILE           1
setenv G4VRMLFILE_MAX_FILE_NUM     100
setenv G4VRMLFILE_VIEWER        vrmlview    #if installed
setenv G4VIS_USE_VRML               1
setenv G4VIS_USE_VRMLFILE           1
setenv PATH ${PATH}:"/afs/cern.ch/sw/contrib/VRML/bin/Linux"

# ---- set up OpenGL or Mesa 
setenv G4VIS_BUILD_OPENGLX_DRIVER   1
setenv G4VIS_USE_OPENGLX            1
setenv OGLHOME /afs/cern.ch/sw/geant4/dev/Mesa/Linux-g++

# ---- set up DAWN
setenv G4VIS_BUILD_DAWN_DRIVER      1
setenv G4VIS_BUILD_DAWNFILE_DRIVER  1  
setenv G4VIS_USE_DAWN               1
setenv G4VIS_USE_DAWNFILE           1
setenv PATH ${PATH}:"/afs/cern.ch/sw/geant4/dev/DAWN/Linux-g++"

setenv LD_LIBRARY_PATH $OGLHOME/lib

# ---- Analysis---- AIDA 3.0/ Anaphe 5.0.5
setenv G4ANALYSIS_BUILD 1
setenv G4ANALYSIS_USE 1
source /afs/cern.ch/sw/lhcxx/share/LHCXX/5.0.5/scripts/setupAnaphe.csh
setenv PATH ${PATH}:/afs/cern.ch/sw/lhcxx/share/LHCXX/5.0.5/scripts/




